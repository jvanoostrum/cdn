export default class gsheet_loader{gsheet_url="about:blank";gsheet_title="Techradar â€” 20XX.XX";gsheet_gid_config="0";gsheet_gid_data="0";gsheet_gid_quadrant="0";gsheet_gid_rings="0";gsheet_queries={query_config:"query_config",query_data:"query_data",query_quadrant:"query_quadrant",query_rings:"query_rings"};gsheet_data=[];gsheet_onload=function(e){};constructor(e){google.charts.load("current"),this.gsheet_onload=void 0!==e.onload?e.onload:this.gsheet_onload,this.gsheet_url=void 0!==e.url?e.url:this.gsheet_url,this.gsheet_gid_data=void 0!==e.gsheet_gid_data?e.gsheet_gid_data:this.gsheet_gid_data,this.gsheet_gid_quadrant=void 0!==e.gsheet_gid_quadrant?e.gsheet_gid_quadrant:this.gsheet_gid_quadrant,this.gsheet_gid_rings=void 0!==e.gsheet_gid_rings?e.gsheet_gid_rings:this.gsheet_gid_rings}load=()=>{google.charts.setOnLoadCallback(this.init),this.gsheet_data=[]};init=()=>{var e=this.setConfigData,t=this.setQueries,s=this.getData,i=this.getQueries,a=this.getAssociativeArray,g=this.gsheet_data,r=new google.visualization.Query(`${this.gsheet_url}?gid=${this.gsheet_gid_config}&headers=1`);this.getPromisedData(r).then((function(r){var h=a(r);g.push(h),e(r);var d=i();t(d),s(d)})).catch((function(e){console.log(e)}))};setConfigData=e=>{var t=this.getAssociativeArray(e);this.gsheet_title=void 0!==t.title?t.title:"",this.gsheet_gid_data=void 0!==t.gsheet_gid_data?t.gsheet_gid_data:"",this.gsheet_gid_quadrant=void 0!==t.gsheet_gid_quadrant?t.gsheet_gid_quadrant:"",this.gsheet_gid_rings=void 0!==t.gsheet_gid_rings?t.gsheet_gid_rings:""};getQueries=()=>{var e=[];return e[this.gsheet_queries.query_data]=new google.visualization.Query(`${this.gsheet_url}?gid=${this.gsheet_gid_data}&headers=1`),e[this.gsheet_queries.query_quadrant]=new google.visualization.Query(`${this.gsheet_url}?gid=${this.gsheet_gid_quadrant}&headers=1`),e[this.gsheet_queries.query_rings]=new google.visualization.Query(`${this.gsheet_url}?gid=${this.gsheet_gid_rings}&headers=1`),e};setQueries=e=>{for(var t in e)e[t].setQuery("select *")};getData=e=>{var t=this.getIndexedArray(e),s=this.gsheet_onload,i=this.gsheet_data;Promise.all(t.map(this.getPromisedData)).then((function(e){e.forEach((e=>i.push(e))),s(i)})).catch((function(e){console.log(e)}))};getIndexedArray=e=>{let t=[];return Object.keys(e).forEach((s=>t.push(e[s]))),t};getAssociativeArray=e=>{let t=[];return e.forEach((e=>t[e.key]=e.value)),t};getPromisedData=e=>new Promise((function(t,s){e.send((function(e){e.isError()&&s(e);var i=function(e){for(var t=[],s=e.getDataTable(),i=s.getNumberOfColumns(),a=s.getNumberOfRows(),g=0;g<a;g++){for(var r={},h=0;h<i;h++){var d=s.getColumnLabel(h).toLowerCase(),_=s.getValue(g,h);r[d]=_}t.push(r)}return t}(e);t(i)}))}))}